---
import BaseLayout from "../layouts/BaseLayout.astro";
import JobPosition from "../components/JobPosition.astro";

// Get all images from the gallery folder
import { readdir } from "fs/promises";
import { join } from "path";

let imageEntries: { path: string }[] = [];
try {
  const galleryPath = join(process.cwd(), "public", "gallery");
  const files = await readdir(galleryPath);
  imageEntries = files
    .filter((file) => /\.(png|jpg|jpeg|gif|webp|svg)$/i.test(file))
    .map((file) => ({ path: `/gallery/${file}` }))
    .sort((a, b) => a.path.localeCompare(b.path));
} catch (error) {
  console.error("Error reading gallery folder:", error);
}
---

<BaseLayout title="ncashin.dev">
  <main
    class="min-h-screen w-screen grid grid-cols-[1fr_1fr_auto] auto-rows-min gap-x-16 gap-y-6 px-7 pt-7 pb-6 items-start"
  >
    <div class="col-span-1 flex flex-col gap-12 h-[calc(100vh-3.25rem)]">
      <section>
        <div>
          <h1 class="text-2xl font-bold">Hi I'm Natalie</h1>
          <p class="font-sans text-sm mt-4">
            I'm currently implementing and iterating on internal AI systems at
            Spellbook.
          </p>
          <p class="font-sans text-sm mt-4">
            In my freetime I'm building notmg a multiplayer top-down shooter <span
              class="font-italic">heavily</span
            > inspired by realm of the mad god
          </p>
        </div>
        <div class="flex flex-wrap mt-6 gap-6 text-sm font-sans">
          <a
            href="mailto:me@ncashin.dev"
            class="text-black underline hover:opacity-70 cursor-pointer"
            >Email</a
          >
          <a
            href="https://github.com/ncashin"
            target="_blank"
            rel="noopener noreferrer"
            class="text-black underline hover:opacity-70 cursor-pointer"
            >GitHub</a
          >
          <a
            href="https://linkedin.com/in/ncashin"
            target="_blank"
            rel="noopener noreferrer"
            class="text-black underline hover:opacity-70 cursor-pointer"
            >LinkedIn</a
          >
          <a
            href="https://twitter.com/ncashin"
            target="_blank"
            rel="noopener noreferrer"
            class="text-black underline hover:opacity-70 cursor-pointer"
            >Twitter</a
          >
        </div>
      </section>

      <div class="flex-grow"></div>

      <section class="font-sans">
        <div class="flex flex-col gap-4">
          <h2 class="text-lg font-serif">
            <a href="https://c-core.ca/" class="text-black hover:underline"
              >C-CORE</a
            >
          </h2>
          <div class="flex flex-col gap-6 text-sm">
            <JobPosition>
              <p class="font-medium">Junior Software Developer</p>
              <p class="">September 2024 - December 2024</p>
              <p class="">
                React, TypeScript, Python, FastAPI, PostgreSQL, PostGIS
              </p>
              <p>Continued work from prior position</p>
            </JobPosition>
            <JobPosition>
              <p class="font-medium">Student Software Developer</p>
              <p class="">May 2024 - August 2024</p>
              <p class="">
                React, TypeScript, Python, FastAPI, PostgreSQL, PostGIS
              </p>
              <p>
                Developed a React web application using geospatial libraries
                (Turf, GDAL, etc.) and proprietary data to support GIS analysts
                and their workflow.
              </p>
              <p>
                Worked with a Python backend to log performance metrics,
                ensuring satisfaction of project and contract requirements.
              </p>
            </JobPosition>
          </div>
        </div>
      </section>
    </div>

    <section class="col-start-2 row-start-1 font-sans">
      <div class="flex flex-col gap-4">
        <h2 class="text-lg font-serif">
          <a href="https://spellbook.legal/" class="text-black hover:underline"
            >Spellbook</a
          >
        </h2>
        <div class="flex flex-col gap-6 text-sm">
          <JobPosition>
            <p class="font-medium">AI Operations Lead</p>
            <p class="">January 2026 - Present</p>
            <p class="">React, TypeScript, Node.JS, MongoDB</p>
          </JobPosition>
          <JobPosition>
            <p class="font-medium">Software Developer</p>
            <p class="">September 2025 - December 2025</p>
            <p class="">React, TypeScript, Node.JS, MongoDB</p>
            <p>Continued work from prior position</p>
          </JobPosition>
          <JobPosition>
            <p class="font-medium">Associate Software Developer - Internship</p>
            <p class="">May 2025 - August 2025</p>
            <p class="">React, TypeScript, Node.JS, MongoDB</p>
            <p class="">
              Worked on Spellbook Associate the #1 AI Agent for Contract Law
            </p>
          </JobPosition>
        </div>
      </div>
    </section>

    <aside class="col-start-3 row-start-1 w-96 flex flex-col gap-8">
      <div class="sticky top-7 flex flex-col gap-8">
        {
          imageEntries.map(({ path }) => {
            return (
              <img
                src={path}
                alt="Gallery image"
                class="w-full h-auto object-cover shadow-md"
                loading="lazy"
              />
            );
          })
        }
      </div>
      <section class="font-sans">
        <h2 class="text-lg font-serif mb-4">Projects</h2>
        <div class="flex flex-col gap-4 text-sm">
          <div class="flex flex-col gap-2.5">
            <p class="font-medium">
              <a href="#" class="text-black hover:underline">notmg</a>
            </p>
            <p class="">2024 - Present</p>
            <p class="">TypeScript, Node.js, WebSockets, Phaser</p>
          </div>
          <div class="flex flex-col gap-2.5">
            <p class="font-medium">
              <a href="#" class="text-black hover:underline">networked ecs</a>
            </p>
            <p class="">2024 - 2025</p>
            <p class="">Rust, WebAssembly, ECS</p>
          </div>
          <div class="flex flex-col gap-2.5">
            <p class="font-medium">
              <a href="#" class="text-black hover:underline"
                >doit 2025 hackathon</a
              >
            </p>
            <p class="">January 2025</p>
            <p class="">React, TypeScript, Node.js, WebSockets</p>
          </div>
        </div>
      </section>
    </aside>
  </main>
</BaseLayout>
